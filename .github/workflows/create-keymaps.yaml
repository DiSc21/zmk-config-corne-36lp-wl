name: 'Create ZMK Keymaps'
on:
  workflow_dispatch:  # can be triggered manually
  push:               # automatically run on changes to following paths
    paths:
      - "config/*.keymap"
      - "config/*.dtsi"
      - "keymap/keymap_config.yaml"
      # - 'boards/*/*/*.keymap'

jobs:
  create-keymaps:
    name: Create Corne36 keymaps
    runs-on: ubuntu-latest
    container:
      image: python:3
      volumes:
        - ${{ github.workspace }}:/app
    steps:
      - name: Checkout the repo
        uses: actions/checkout@v2
      - name: Running create keymaps
        run: pip install --no-cache-dir keymap-drawer && ./keymap/create_keymap_by_layer.sh
      #    pip install --no-cache-dir keymap-drawer
      #FROM python:3
      ##FROM ubuntu:22.04
      #
      ## install basic libraries 
      #RUN apt-get update && apt-get install -y
      #RUN apt-get install -y --no-install-recommends --fix-missing vim curl gnupg2 wget lsb-release software-properties-common
      #
      #ENV TZ=Europe/Berlin
      #RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone
      #RUN apt-get update && apt-get install -y --fix-missing tzdata
      #
      #RUN pip install --no-cache-dir --upgrade pip && \
      #    pip install --no-cache-dir keymap-drawer
      #
      #CMD mkdir /ws/
      #WORKDIR /ws/
